<?php

use App\Http\Controllers\UserController;
use Symfony\Component\HttpKernel\Fragment\RoutableFragmentRenderer;

/*
|--------------------------------------------------------------------------
| Web Routes
|--------------------------------------------------------------------------
|
| Here is where you can register web routes for your application. These
| routes are loaded by the RouteServiceProvider within a group which
| contains the "web" middleware group. Now create something great!
|
*/

Route::get('/', function () {
    return view('home');
})->name('root');
Route::get('confirmed/{token}','UserController@confirmedMail')->name('confirmedMail');
Route::get('verify','UserController@verifyMail')->name('verifuMail');
Route::get('cancelnow','UserController@cancelSubNow')->name('cancelSubNow');
Route::get('stripePlan','UserController@returnStripePlan')->name('returnStripePlan');
Route::get('twentyfour','UserController@isSubscribed')->name('isSubscribed');
Route::get('cancle','UserController@cancleSubscription')->name('cancleSubscription');
Route::post('payment','UserController@subscribeUser')->name('subscribeUser');
Route::get('home', 'UserController@getHome' )->name('home');
Route::post('subsription','UserConroll@addSubscription')->name('addSubscrition');
Route::get('allscans', 'UserController@showScans' )->name('showScans');
Route::get('skripta', 'UserController@skripta' )->name('skripta');
Route::get('/storage/{dir}/{fileName}','UserController@DownloadScan')->name('DownloadScan');
Route::post('reset','UserController@reset')->name('reset');
Route::post('contact','UserController@contactUs')->name('contact');
Route::post('forgotpw','UserController@passwordRecovery')->name('passwordRecovery');
Route::get('resetpw/{token}','UserController@getResetPassword')->name('passwordReset');
Route::post('userlogout', 'UserController@logout')->name('userlogout');
Route::post('schedulescan','UserController@scheduleScan')->name('scheduleScan');
Route::post('userLogin', 'UserController@postUserLogin')->name('userLogin');
Route::post('userRegister', 'UserController@postUserRegister')->name('userRegister');

Route::post('recaptchaverify', 'HomeController@recaptchaverify')->name('recaptchaverify');

//Route::get('/sessionStatus', 'HomeController@sessionStatus')->name('sessionStatus');

Route::get('/sessionStatus', function() {
    return ['user' => Auth::user() ? Auth::user()->first() : null];
});

Route::post( '/scanning' , 'UserController@profi')->name('profi');

Route::auth();

    
Auth::routes();

