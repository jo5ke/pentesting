<template>

    <div id="loginContainer" class="container-fluid" v-if="visible" >
      
      <app-form :options.sync="logForm" :regForm="reg"></app-form>

    </div>


</template>


<script>
import StartScan from "../comps_forEach_tool/StartScan.vue";
import { SnotifyPosition, SnotifyStyle } from "vue-snotify";
import appForm from "../form_comps/appForm.vue";

export default {
  components: {
    appForm,
    StartScan
  },
  data() {
    let vm = this;
    return {
      visible: false,
      reg: false,
      logForm: {
        axiosSubmitForm() {
          axios
            .post("/userLogin", {
              email: vm.logForm.inputs.email.value,
              pw: vm.logForm.inputs.pw.value
            })
            .then(function(response) {
              let user_exists = response.status === 200;

              if (user_exists) {
                //after login go to home and header should change
                axios.get("/home").then(function(response) {
                  window.location = response.data.redirect;
                });
              }
            })
            .catch(function(error) {
              vm.$snotify.error("Not logged in!", "Error!", {
                position: SnotifyPosition.centerTop,
                backdrop: 0.5
              });
            });
        },
        inputs: {
          email: {
            type: "email",
            id: "email",
            label: "e-mail address",
            value: "",
            validation: {
              required: true
            }
          },
          pw: {
            type: "password",
            id: "password",
            label: "password",
            value: "",
            validation: {
              required: true
            }
          }
        }
      }
    };
  },
  mounted(){
    this.visible = true;
  },
  methods: {}
};
</script>


<style scoped>
#loginContainer{
  background-image: url('/images/log_reg.jpg');
  background-attachment: fixed;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  width:100vw;
  height: 110vh;
  margin-left: -32px;
}


.cube1,
.cube2 {
  background-color: #333;
  width: 15px;
  height: 15px;
  position: absolute;
  top: 0;
  left: 0;

  -webkit-animation: sk-cubemove 1.8s infinite ease-in-out;
  animation: sk-cubemove 1.8s infinite ease-in-out;
}

.cube2 {
  -webkit-animation-delay: -0.9s;
  animation-delay: -0.9s;
}

@-webkit-keyframes sk-cubemove {
  25% {
    -webkit-transform: translateX(42px) rotate(-90deg) scale(0.5);
  }
  50% {
    -webkit-transform: translateX(42px) translateY(42px) rotate(-180deg);
  }
  75% {
    -webkit-transform: translateX(0px) translateY(42px) rotate(-270deg)
      scale(0.5);
  }
  100% {
    -webkit-transform: rotate(-360deg);
  }
}

@keyframes sk-cubemove {
  25% {
    transform: translateX(42px) rotate(-90deg) scale(0.5);
    -webkit-transform: translateX(42px) rotate(-90deg) scale(0.5);
  }
  50% {
    transform: translateX(42px) translateY(42px) rotate(-179deg);
    -webkit-transform: translateX(42px) translateY(42px) rotate(-179deg);
  }
  50.1% {
    transform: translateX(42px) translateY(42px) rotate(-180deg);
    -webkit-transform: translateX(42px) translateY(42px) rotate(-180deg);
  }
  75% {
    transform: translateX(0px) translateY(42px) rotate(-270deg) scale(0.5);
    -webkit-transform: translateX(0px) translateY(42px) rotate(-270deg)
      scale(0.5);
  }
  100% {
    transform: rotate(-360deg);
    -webkit-transform: rotate(-360deg);
  }
}


h4 {
  text-align: center;
}
</style>
