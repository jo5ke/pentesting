<template>
    <div id="loginContainer" class="container-fluid">
      <tool-header>
          <h4 slot="title">Login Form</h4>
          <p>Login with the form below.</p>
      </tool-header>
      <app-form :options.sync="logForm" :regForm="reg"></app-form>

    </div>
</template>


<script>
console.clear();
import StartScan from '../comps_forEach_tool/StartScan.vue';
import {SnotifyPosition, SnotifyStyle} from 'vue-snotify';
import appForm from '../form_comps/appForm.vue';
import ToolHeader from '../comps_forEach_tool/ToolHeader.vue';
import eventBus from '../../eventBus';

export default {
  components:{
    appForm,ToolHeader,StartScan
  },
  data(){ 
    let vm = this;
    return{
      reg:false,
      logForm:{
        
        axiosSubmitForm(){
          axios.post("/userLogin",
          {email:vm.logForm.inputs[0].value,
          pw:vm.logForm.inputs[1].value})
          .then(function (response) {
            console.log(response)
            if(response.status === 200)
            {
              localStorage.setItem("loggedIn",true);
              //fire event on event bus
            

              eventBus.$emit("userLoggedIn",true);
              location.reload();
              vm.$router.push("/home");  
              
            }
            

          })
          .catch(function (error) {
            localStorage.setItem("loggedIn",false)
            vm.$snotify.error('Not logged in!',"Error!",{
                position: SnotifyPosition.centerTop,
                backdrop:0.5
              });
          });
        },
        inputs:[
            {
              type: 'email',
              id: 'email',
              label: 'e-mail address',
              value: 'jon.doe@example.com',
              validation: {
                required: true,
              },
            },
            {
              type: 'password',
              id: 'password',
              label: 'password',
              value:'HiapgiavurdEse6@',
              validation: {
                required: true,
              },
            }
        ]
      }

    }
  },
  methods:{

    }
}
</script>


<style scoped>


h4{
  text-align: center;
}

</style>
