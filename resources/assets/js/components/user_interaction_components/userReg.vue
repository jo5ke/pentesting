<template>
    <div id="loginContainer" class="container-fluid">
      <tool-header>
          <h4 slot="title">Register Form</h4>
          <p>Register with your credentials.</p>
      </tool-header>
      <app-form :options.sync="logForm" :regForm="reg"></app-form>
    </div>
</template>


<script>


import appForm from '../form_comps/appForm.vue';
import ToolHeader from '../comps_forEach_tool/ToolHeader.vue';
import {SnotifyPosition, SnotifyStyle} from 'vue-snotify';

export default {
  components:{
    appForm,ToolHeader
  },
  data(){
  let vm = this;
   return{
     reg:true,
     logForm:{
       axiosSubmitForm(){

        axios.post("/userRegister",
          {
            email:vm.logForm.inputs[0].value,
            password:vm.logForm.inputs[1].value,
            sameaspw:vm.logForm.inputs[2].value,
            firstname : vm.logForm.inputs[3].value,
            lastname : vm.logForm.inputs[4].value,
          }

          )
          .then(function (response) {
              if(response.status === 200)
              {
                vm.$snotify.success(`Welcome ${vm.logForm.inputs[3].value}`,"Registered!",{
                  position: SnotifyPosition.centerTop,
                  backdrop:0.5,
                });
                vm.$router.push("/home");  
              }
              
          })
          .catch(function (error) {
            vm.$snotify.error('User exists!',"Error!",{
                position: SnotifyPosition.centerTop,
                backdrop:0.5
            });
          });


       },
       inputs:[
          {
            type: 'text',
            id: 'email',
            label: 'e-mail address',
            value: 'jon.doe@example.com',
            validation: {
              required: true,
            },
          },
          {
            type: 'password',
            id: 'password',
            label: 'password',
            value:'HiapgiavurdEse6@',
            validation: {
              required: true,
            },
          },
          {
            type: 'password',
            id: 'sameaspw',
            value:'HiapgiavurdEse6@',
            label: 'repeat password',
            validation: {
              required: true,
            },
          },
          {
            type: 'text',
            id: 'firstname',
            label: 'Name',
            value: 'John',
            validation: {
              required: true,
            },
          },
          {
            type: 'text',
            id: 'lastname',
            label: 'Last Name',
            value: 'Doe',
            validation: {
              required: true,
            },
          },
      ]
     }

    }
  },
  methods:{

    }
}
</script>


<style scoped>
h4{
  text-align: center;
}

</style>
