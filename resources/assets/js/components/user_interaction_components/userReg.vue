<template>
    <div id="loginContainer" >
      
      <app-form :options.sync="logForm" :regForm="reg"></app-form>
      
    </div>
</template>


<script>
import appForm from "../form_comps/appForm.vue";
import { SnotifyPosition, SnotifyStyle } from "vue-snotify";

export default {
  components: {
    appForm
  },
  data() {
    let vm = this;
    return {
      reg: true,
      logForm: {
        axiosSubmitForm() {
          axios
            .post("/userRegister", {
              email: vm.logForm.inputs.email.value,
              password: vm.logForm.inputs.pw.value,
              sameaspw: vm.logForm.inputs.pwagain.value,
              fullname: vm.logForm.inputs.fullname.value,
            })
            .then(function(response) {
              if (response.data === "This mail already exist") {
                vm.$snotify.error("User exists!", "Error!", {
                  position: SnotifyPosition.centerTop,
                  backdrop: 0.5
                });

                return;
              } else if (response.status === 200) {
                window.setTimeout(() => {
                  window.location.href = "/";
                });
                return;
              }
            })
            .catch(response => {
              vm.$snotify.error("An error has occured.", "Error", {
                position: SnotifyPosition.centerTop,
                backdrop: 0.5
              });
              //TODO : UNCOMMENT.::.
              // window.setTimeout(() => {
              //   window.location.reload();
              // }, 1500);
            });
        },
        inputs: {
          email: {
            type: "text",
            id: "email",
            label: "Email",
            value: "",
            validation: {
              required: true
            }
          },
          pw: {
            type: "password",
            id: "password",
            label: "Password",
            value: "",
            validation: {
              required: true
            }
          },
          pwagain: {
            type: "password",
            id: "sameaspw",
            value: "",
            label: "Confirm password",
            validation: {
              required: true
            }
          },
          fullname: {
            type: "text",
            id: "firstname",
            label: "Full name",
            value: "",
            validation: {
              required: true
            }
          },
          
        },
        recaptchaToken: undefined
      }
    };
  },
  methods: {
    onCaptchaVerified() {}
  }
};
</script>


<style scoped>
#loginContainer {
  background-color: #e3e3e3;
  width: 100vw;
  height: 110vh;
}

h4 {
  text-align: center;
}
</style>
