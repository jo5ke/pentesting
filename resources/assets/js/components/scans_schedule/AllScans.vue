<template>
    <div  id="allScans" >

        <v-client-table
        :data='table_data'
        :columns='columns'
        :options='options'
        >

        <a  slot="download" 
            slot-scope="props"
            :href="props.row.uri"
        >
           <i class="fa fa-download"></i>
        </a>

        </v-client-table>

    </div>
</template>

<script>
import ToolHeader from "../comps_forEach_tool/ToolHeader.vue";

export default {
  components: {
    ToolHeader
  },
  created() {
    axios
      .get("allscans")
      .then(response => {
        //this adapts response for show in vue tables 2
        response.data.data.forEach(scan_info => {
          this.table_data.push({
            date: moment(scan_info.created_at),
            scan: scan_info.scanName,
            output: "",
            uri: scan_info.path
          });
        });
      })
      .catch(err => {
        console.error(err);
      });
  },
  data() {
    return {
      user_token: "",
      columns: ["date", "scan", "download"],

      table_data: [],
      options: {
        columnsClasses: {
          date: "cursorable"
        },
        datepickerOptions: {
          linkedCalendars: true
        },
        sortable: ["date"],
        filterable: ["date", "scan"],
        dateColumns: ["date"],
        filterByColumn: true,
        pagination: {
          dropdown: true,
          nav: "scroll"
        },
        dateFormat: "DD/MM/YYYY"
      }
    };
  }
};
</script>

<style scoped>
/*deep select certain class*/

#allScans {
  margin-left: 30px;
}

body >>> .dropdown-menu {
  width: 13rem;
}


#allScans >>> .VueTables__scan-filter-wrapper input
{
  font-weight: bold;
  border:0;
  background-color: transparent !important;
  width:95%;  
  text-align: center;
  cursor: pointer;
  padding-left: 0;
  padding-right: 0;
}

#allScans >>> .VueTables__scan-filter-wrapper input:focus {
    cursor: text;
    outline:none !important;
    border-radius: 0;
    border-color: none;
    box-shadow:none;
    -webkit-box-shadow:none;

    border-bottom: 1px solid rgba(0, 8, 53, 0.603);
  }



#allScans >>> .VueTables__date-filter-wrapper {
  cursor: pointer;
  cursor: hand;
}
#allScans >>> .VueTables__sortable {
  cursor: pointer;
  cursor: hand;
}
#allScans >>> .VueTables__dropdown-pagination {
  display: block;
}
</style>
