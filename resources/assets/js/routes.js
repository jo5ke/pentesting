

import VueRouter from 'vue-router';
import Tools from './tools';

let routes = [{
        name:'main',
        path: '/',
        redirect:'/home',
        children:[
            {
                path:'/home',
                component: require('./components/Home.vue').default
            },
            {
                path:'/forgotpw',
                component: require('./components/pw_ctrl_components/ForgotPw.vue').default,
                meta:{alreadyLogged:true}
            },
            {
                path:'/resetpw',
                component: require('./components/pw_ctrl_components/ResetPw.vue').default,
                meta:{alreadyLogged:true}
            },
            {
                path: 'all-scans',
                component: require('./components/scans_schedule/AllScans.vue').default,
                meta:{notLogged:true}
                
            },
            {
                path:'userlogin',
                component: require('./components/user_interaction_components/userLogin.vue').default,
                meta:{alreadyLogged:true}
            }, 
            {
                path:'pricing',
                component:require('./components/user_interaction_components/Pricing.vue').default
            },
            {
                path:'userreg',
                component: require('./components/user_interaction_components/userReg.vue').default,
                meta:{alreadyLogged:true}
            },
            {
                path:'schedule',
                component: require('./components/scans_schedule/Schedule.vue').default,
                meta:{notLogged:true}
            },
            {
                path:'contact',
                component:require('./components/user_interaction_components/contactForm.vue').default
            }
        ],
        component: require('./components/Main').default
        },
        {
            path: '*',
            redirect:'/home'
        }
]

for(let prop in Tools)
{
    let specificTools = Tools[prop];
    specificTools.forEach((tool)=>{
        routes[0].children.push({
            meta:tool.metaProp,
            path: tool.relPath,
            component: require('./components/tools/'+tool.componentName).default
        })
    })
}


export default new VueRouter({
    routes,
    linkActiveClass: 'is-active'
});